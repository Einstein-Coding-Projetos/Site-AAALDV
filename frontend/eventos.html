<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eventos | AAALDV</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="fixed top-0 left-0 right-0 z-50 bg-background border-b border-border ">
    <div class="container mx-auto px-4 flex items-center justify-between h-20">
      <a href="index.html" class="font-display text-2xl tracking-tight hidden sm:block">
        <span class="text-primary">AAA</span>LDV
      </a>
      <div class="hidden md:flex items-center gap-8">
        <a href="index.html" class="nav-link">Início</a>
        <a href="institucional.html" class="nav-link">Institucional</a>
        <a href="eventos.html" class="nav-link text-primary">Eventos</a>
        <a href="loja.html" class="nav-link">Loja</a>
        <a href="transparencia.html" class="nav-link">Transparência</a>
        <a href="#contato" class="nav-link">Contato</a>
      </div>
    </div>
  </nav>

  <main class="pt-20">
    <section class="py-20 bg-background">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h1 class="section-title mb-4">
            <span class="text-primary">Eventos</span> & Calendário
          </h1>
          <p class="text-muted-foreground text-lg max-w-2xl mx-auto">
            Confira os eventos da AAALDV e fique por dentro de todas as atividades, competições e confraternizações
          </p>
        </div>

        <!-- Notícias Recentes -->
        <div class="mb-20">
          <h2 class="text-2xl font-display font-bold mb-8">
            <span class="text-primary">Últimas</span> Notícias
          </h2>
          <div id="noticias-recentes" class="grid md:grid-cols-3 gap-6">
            <div class="bg-card border border-border rounded-lg overflow-hidden">
              <div class="relative h-32 bg-secondary/30 flex items-center justify-center">
                <span class="text-muted-foreground text-sm">Carregando...</span>
              </div>
              <div class="p-4">
                <h3 class="text-base font-semibold mt-1">Carregando notícias...</h3>
              </div>
            </div>
          </div>
        </div>

        <!-- Calendário de Eventos -->
        <div class="mb-20">
          <h2 class="text-2xl font-display font-bold mb-8">
            <span class="text-primary">Calendário</span> de Eventos
          </h2>
          <div id="calendario-eventos" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Eventos serão carregados aqui -->
            <div class="col-span-3 text-center py-8">
              <p class="text-muted-foreground">Carregando eventos...</p>
            </div>
          </div>
        </div>

        <!-- Galeria de Fotos -->
        <div>
          <h2 class="text-2xl font-display font-bold mb-8">
            <span class="text-primary">Galeria</span> de Fotos
          </h2>
          <div id="galeria-fotos" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            <!-- Fotos serão carregadas aqui -->
            <div class="col-span-4 text-center py-8">
              <p class="text-muted-foreground">Carregando galeria...</p>
            </div>
          </div>
        </div>

      </div>
    </section>
  </main>

  <footer id="contato" class="bg-secondary/30 border-t border-border py-12">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-8 mb-8">
        <div>
          <h3 class="font-display text-xl mb-4">
            <span class="text-primary">AAA</span>LDV
          </h3>
          <p class="text-muted-foreground">
            A atlética de Engenharia Biomédica do Instituto Einstein.
          </p>
        </div>

        <div>
          <h3 class="font-display text-lg mb-4">Contato</h3>
          <div class="space-y-2 text-muted-foreground">
            <p><a href="https://www.instagram.com/aaaldv.einstein/" target="_blank">@aaaldv.einstein (Instagram)</a></p>
            <p><a href="https://www.tiktok.com/@aaaldv.einstein" target="_blank">@aaaldv.einstein (TikTok)</a></p>
            <p><a href="https://www.linkedin.com/company/associa%C3%A7%C3%A3o-atl%C3%A9tica-acad%C3%AAmica-leonardo-da-vinci-engenharia-biom%C3%A9dica-einstein/" target="_blank">LinkedIn</a></p>
            <p><a href="mailto:aaaldv.engbiomedeinstein@gmail.com">aaaldv.engbiomedeinstein@gmail.com</a></p>
          </div>
        </div>

        <div>
          <h3 class="font-display text-lg mb-4">Links Rápidos</h3>
          <div class="space-y-2">
            <a href="index.html" class="block text-muted-foreground hover:text-primary">Início</a>
            <a href="institucional.html" class="block text-muted-foreground hover:text-primary">Institucional</a>
            <a href="eventos.html" class="block text-muted-foreground hover:text-primary">Eventos</a>
            <a href="transparencia.html" class="block text-muted-foreground hover:text-primary">Transparência</a>
          </div>
        </div>
      </div>

      <div class="border-t border-border mt-24 pt-12 pb-12 text-center">
        <p class="text-sm text-muted-foreground">© 2024 AAALDV. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

  <script>
    const API_URL = 'http://localhost:3000';

    // Carregar notícias
    async function loadNoticias() {
      try {
        const response = await fetch(`${API_URL}/api/news`);
        const noticias = await response.json();
        
        // Carregar notícias recentes (seção de notícias)
        const noticiasContainer = document.getElementById('noticias-recentes');
        if (noticiasContainer) {
          if (noticias.length === 0) {
            noticiasContainer.innerHTML = `
              <div class="col-span-3 text-center py-8">
                <p class="text-muted-foreground">Nenhuma notícia cadastrada ainda.</p>
              </div>
            `;
          } else {
            const noticiasRecentes = noticias.slice(0, 3);
            noticiasContainer.innerHTML = noticiasRecentes.map(noticia => `
              <div class="bg-card border border-border rounded-lg overflow-hidden">
                <div class="relative h-32 bg-secondary/30 flex items-center justify-center overflow-hidden">
                  ${noticia.foto 
                    ? `<img src="${API_URL}${noticia.foto}" alt="${noticia.titulo}" class="w-full h-full object-cover">`
                    : `<span class="text-muted-foreground text-sm">Imagem do Evento</span>`
                  }
                </div>
                <div class="p-4">
                  <span class="text-xs text-muted-foreground">${noticia.data}</span>
                  <h3 class="text-base font-semibold mt-1">${noticia.titulo}</h3>
                  <p class="text-muted-foreground text-sm mt-2">
                    ${noticia.descricao || 'Sem descrição'}
                  </p>
                </div>
              </div>
            `).join('');
          }
        }
        
        // Carregar calendário de eventos
        const calendarioContainer = document.getElementById('calendario-eventos');
        if (calendarioContainer) {
          if (noticias.length === 0) {
            calendarioContainer.innerHTML = `
              <div class="col-span-3 text-center py-8">
                <p class="text-muted-foreground">Nenhum evento cadastrado ainda.</p>
              </div>
            `;
          } else {
            calendarioContainer.innerHTML = noticias.map(noticia => {
              // Converter data de dd/mm/yyyy para objeto Date
              const [dia, mes, ano] = noticia.data.split('/');
              const meses = ['JAN', 'FEV', 'MAR', 'ABR', 'MAI', 'JUN', 'JUL', 'AGO', 'SET', 'OUT', 'NOV', 'DEZ'];
              const mesNome = meses[parseInt(mes) - 1];
              
              return `
                <div class="bg-card border border-border rounded-lg p-6 hover:border-primary transition-colors">
                  <div class="flex items-start gap-4">
                    <div class="bg-primary/10 rounded-lg p-3 text-center min-w-[60px]">
                      <div class="text-primary font-display text-2xl font-bold">${dia}</div>
                      <div class="text-primary text-xs">${mesNome}</div>
                    </div>
                    <div class="flex-1">
                      <h3 class="font-display font-bold text-lg mb-1">${noticia.titulo}</h3>
                      <p class="text-muted-foreground text-sm mb-2 line-clamp-2">${noticia.descricao || 'Sem descrição'}</p>
                    </div>
                  </div>
                </div>
              `;
            }).join('');
          }
        }
        
        // Carregar galeria de fotos (a partir do 4º evento mais recente)
        const galeriaContainer = document.getElementById('galeria-fotos');
        if (galeriaContainer) {
          const noticiasComFoto = noticias.filter(n => n.foto).slice(3); // Pula os 3 primeiros
          if (noticiasComFoto.length === 0) {
            galeriaContainer.innerHTML = `
              <div class="col-span-4 text-center py-8">
                <p class="text-muted-foreground">Nenhuma foto disponível ainda.</p>
              </div>
            `;
          } else {
            galeriaContainer.innerHTML = noticiasComFoto.map(noticia => `
              <div class="aspect-square bg-secondary/30 rounded-lg overflow-hidden hover:opacity-80 transition-opacity cursor-pointer">
                <img src="${API_URL}${noticia.foto}" alt="${noticia.titulo}" class="w-full h-full object-cover">
              </div>
            `).join('');
          }
        }
        
      } catch (error) {
        console.error('Erro ao carregar notícias:', error);
      }
    }

    loadNoticias();
  </script>
</body>
</html>
